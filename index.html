<!DOCTYPE html>
<html lang="zh-cn">
        <head>
                        <meta charset="utf-8" />
                        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                        <meta name="generator" content="Pelican" />
                        <title>Welcome to YZSH-HSZY blog.</title>
                        <link rel="stylesheet" href="https://yzsh-hszy.github.io/theme/css/main.css" />
                                <link href="https://yzsh-hszy.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Welcome to YZSH-HSZY blog. Atom Feed" />
        </head>

        <body id="index" class="home">
                <header id="banner" class="body">
                        <h1><a href="https://yzsh-hszy.github.io/">Welcome to YZSH-HSZY blog.</a></h1>
                        <nav><ul>
                                                <li><a href="https://yzsh-hszy.github.io/category/cpython.html">Cpython</a></li>
                                                <li><a href="https://yzsh-hszy.github.io/category/linux.html">Linux</a></li>
                                                <li><a href="https://yzsh-hszy.github.io/category/mindspore.html">Mindspore</a></li>
                                                <li><a href="https://yzsh-hszy.github.io/category/qemu.html">Qemu</a></li>
                                                <li><a href="https://yzsh-hszy.github.io/category/qt.html">Qt</a></li>
                                                <li><a href="https://yzsh-hszy.github.io/category/sqlcipher.html">SQLCipher</a></li>
                                                <li><a href="https://yzsh-hszy.github.io/category/test.html">Test</a></li>
                        </ul></nav>
                </header><!-- /#banner -->

                <aside id="featured" class="body">
                    <article>
                        <h1 class="entry-title"><a href="https://yzsh-hszy.github.io/2025-09-10-compile-sqlcipher-using-msvc.html">Compile SQLCipher Using MSVC</a></h1>
<footer class="post-info">
        <abbr class="published" title="2025-09-10T12:00:00+08:00">
                Published: Wed 10 September 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="https://yzsh-hszy.github.io/author/yzsh-hszy.html">YZSH-HSZY</a>
                </address>
        <p>In <a href="https://yzsh-hszy.github.io/category/sqlcipher.html">SQLCipher</a>.</p>
        
</footer><!-- /.post-info --><h1>介绍</h1>
<p>记录使用 <code>MSVC</code> 编译器编译 <code>SQLCipher</code> 这个加密<code>SQLite</code>扩展项目的笔记</p>
<h2>准备</h2>
<ul>
<li><code>ActiveTcl</code>: 一个Tcl/Tk 发行版, 开箱即用(SQLCipher需要tclsh用于生产源代码和测试)</li>
<li><code>OpenSSL</code>: SQLCipher使用的加密后端</li>
</ul>
<blockquote>
<p>参考文档:</p>
</blockquote>
<ul>
<li><a href="https://github.com/sqlcipher/sqlcipher">sqlcipher官方仓库</a></li>
<li><a href="https://discuss.zetetic.net/c/sqlcipher/5?page=3">sqlcipher社区</a></li>
<li><a href="https://platform.activestate.com/ActiveState/ActiveTcl-8.6">ActiveTcl下载</a></li>
</ul>
<h2>编译</h2>
<p>以<code>4.1.0</code>版本<code>SQLCipher</code>为例</p>
<ul>
<li>准备 <code>openssl 1.1.x</code> 库, <code>ActiveTcl</code>包(<code>sqlcipher</code>使用<code>tcl</code>生成部分源码和测试)</li>
<li>拉取 <code>sqlcipher</code> 源码并切换到4.1.0</li>
<li>修改 <code>Makefile.msc</code> 添加<code>TCC</code>/<code>RCC</code>/<code>LTLINKOPTS</code>的额外选项, 如下所示</li>
</ul>
<pre><code class="language-makefile">TCC = $(TCC) -DSQLITE_HAS_CODEC -DSQLITE_TEMP_STORE=2 -IC:\opt\openssl-1.1.1d-x64\include
RCC = $(RCC) -DSQLITE_HAS_CODEC -DSQLITE_TEMP_STORE=2 -IC:\opt\openssl-1.1.1d-x64\include
LTLINKOPTS = $(LTLINKOPTS) /LIBPATH:C:\opt\openssl-1.1.1d-x64\lib libcrypto.lib
</code></pre>
<blockquote>
<p><code>nmake -f Makefile.msc</code> 编译所有目标</p>
</blockquote>
<p><strong>注意</strong></p>
<ul>
<li>不同sqlcipher版本支持的openssl-api不一致, 可根据changelog查看对应支持</li>
<li><code>4.1.0</code> 版本只需要开启 <code>SQLITE_HAS_CODEC</code> 宏即可</li>
</ul>
<h2>示例</h2>
<ul>
<li><code>sqlite3 :memory: &quot;PRAGMA cipher_version;&quot;</code> 查看sqlcipher版本</li>
<li><code>sqlite3 :memory: &quot;SELECT sqlite_version();&quot;</code> 查看对应的sqlite版本</li>
<li><code>sqlite3 :memory: &quot;PRAGMA compile_options;&quot;</code> 查看编译选项</li>
</ul>
<p><strong>注意</strong> 加解密的<code>key</code>(密码)/<code>cipher_compatibility</code>(加密版本)/<code>kdf_iter</code>(密钥迭代次数)/<code>cipher</code>(加密方法) 都必须一致, 才能正确解密</p>
<h3>使用C-API操作db</h3>
<pre><code class="language-c">
</code></pre>
<h3>python binding of sqlcipher</h3>
<p>使用 <code>pysqlcipher3</code> 包完成 <code>sqlcipher</code> 的py绑定</p>
<blockquote>
<p>参考:</p>
</blockquote>
<ul>
<li><a href="https://github.com/rigglemania/pysqlcipher3.git">pysqlcipher3仓库</a></li>
</ul>
<p><strong>环境</strong></p>
<p><code>MSVC 19</code>/<code>cl for x64</code>/<code>sqlcipher 4.1.0</code>/<code>openssl 1.1.1d</code></p>
<p><strong>步骤</strong></p>
<ul>
<li>准备 <code>sqlcipher</code> 的源码, 生成加密版本的 <code>sqlite3.c</code> 文件</li>
<li>拉取 <code>pysqlcipher3</code> 的代码仓库</li>
<li>复制 <code>sqlite3.c</code>/<code>sqlite3.h</code> 到 <code>pysqlcipher3/amalgamation</code> 下</li>
<li>修复 <code>pysqlcipher3/setup.py</code> 的高版本兼容问题
<blockquote>
<p><code>cl</code> 定义python API模块名宏 <code>MODULE_NAME</code> 的字符串错误, 在 <code>quote_argument</code> 方法修改 <code>quote = '&quot;' if sys.platform != 'win32' else '\\&quot;'</code> 为 <code>quote = '&quot;' if sys.platform != 'win32' else '\&quot;'</code>
<code>OPENSSL_CONF</code> 在 <code>1.1</code> 以下版本中存在, <code>pysqlcipher3</code> 仅用它来定位库路径, <code>1.1.1d</code> 版本中可以使用<code>libcrypto.lib</code>的绝对路径来代替
链接库 <code>libeay32.lib</code> 在 <code>1.1.0</code> 版本中被弃用, 更改为 <code>libcrypto.lib</code></p>
</blockquote>
</li>
<li>设置 <code>OPENSSL_CONF</code> 环境变量及激活msvc_x64终端</li>
<li>使用 <code>python setup.py build_amalgamation</code> 的源码编译版本, 而不是 <code>build_ext</code> 的库链接版本</li>
</ul>
<h4>使用pysqlcipher3操作sqlite3</h4>
<pre><code class="language-py">from pysqlcipher3 import dbapi2 as sqlite
conn = sqlite.connect('test.db')
c = conn.cursor()
c.execute(&quot;PRAGMA key='password'&quot;)
c.execute(&quot;PRAGMA cipher_compatibility = 3&quot;)
c.execute('''create table if not exists stocks (date text, trans text, symbol text, qty real, price real)''')
c.execute(&quot;&quot;&quot;insert into stocks values ('2006-01-05','BUY','RHAT',100,35.14)&quot;&quot;&quot;)
c.execute(&quot;&quot;&quot;select * from stocks&quot;&quot;&quot;)
print(c.fetchall())
conn.commit()
c.close()
</code></pre>
                    </article>
                </aside><!-- /#featured -->
                    <section id="content" class="body">
                        <h1>Other articles</h1>
                        <hr />
                        <ol id="posts-list" class="hfeed">

                <li><article class="hentry">
                    <header>
                        <h1><a href="https://yzsh-hszy.github.io/2025-09-01-qtableview-multi-key-sort.html" rel="bookmark"
                               title="Permalink to QTableView Multi-Key Sort">QTableView Multi-Key Sort</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-09-01T12:00:00+08:00">
                Published: Mon 01 September 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="https://yzsh-hszy.github.io/author/yzsh-hszy.html">YZSH-HSZY</a>
                </address>
        <p>In <a href="https://yzsh-hszy.github.io/category/qt.html">Qt</a>.</p>
        
</footer><!-- /.post-info -->                        <h1>介绍</h1>
<p>在Qt的Tableview中让数据按多个指定项有序, 类似基数排序</p>
<h2>key固定, 不会动态更改排序key</h2>
<h3>使用自定义model实现静态多key有序</h3>
<blockquote>
<p>继承 <code>QAbstractTableModel</code> 实现自定义<code>TableModel</code>
重写以下方法:</p>
</blockquote>
<pre><code class="language-cpp">QVariant data(const QModelIndex&amp; index, int role = Qt::DisplayRole …</code></pre>
                        <a class="readmore" href="https://yzsh-hszy.github.io/2025-09-01-qtableview-multi-key-sort.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="https://yzsh-hszy.github.io/2025-03-20-linux-ssh-port-forward-example.html" rel="bookmark"
                               title="Permalink to Linux SSH Port Forward Example.">Linux SSH Port Forward Example.</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-03-20T12:00:00+08:00">
                Published: Thu 20 March 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="https://yzsh-hszy.github.io/author/yzsh-hszy.html">YZSH-HSZY</a>
                </address>
        <p>In <a href="https://yzsh-hszy.github.io/category/linux.html">Linux</a>.</p>
        
</footer><!-- /.post-info -->                        <h1>介绍</h1>
<p>此文章记录使用ssh进行端口转发的示例。</p>
<p>ssh能够将其他tcp端口的网络数据通ssh连接来转发, 并且提供自动加密及解密服务, 也叫做tunnel(隧道). 如<code>Telnet</code>/<code>SMTP</code>/<code>LDAP</code>等应用.</p>
<blockquote>
<p>ssh隧道优点:</p>
</blockquote>
<ol>
<li>避免了用户名,密码及隐私信 …</li></ol>
                        <a class="readmore" href="https://yzsh-hszy.github.io/2025-03-20-linux-ssh-port-forward-example.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="https://yzsh-hszy.github.io/2025-03-15-linux-root-file-system-make.html" rel="bookmark"
                               title="Permalink to Linux Root File System Make.">Linux Root File System Make.</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-03-15T12:00:00+08:00">
                Published: Sat 15 March 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="https://yzsh-hszy.github.io/author/yzsh-hszy.html">YZSH-HSZY</a>
                </address>
        <p>In <a href="https://yzsh-hszy.github.io/category/linux.html">Linux</a>.</p>
        
</footer><!-- /.post-info -->                        <h1>笔记介绍</h1>
<p>此文件记载我学习定制linux系统中关于 <code>root file system</code> 的部分</p>
<h2>参考文档</h2>
<ul>
<li><a href="https://www.cnblogs.com/wsg1100/p/13127636.html">博客园-制作ubuntu-base rootfs博客</a></li>
</ul>

                        <a class="readmore" href="https://yzsh-hszy.github.io/2025-03-15-linux-root-file-system-make.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="https://yzsh-hszy.github.io/2025-03-10-customize-virtual-device-using-qemu.html" rel="bookmark"
                               title="Permalink to Customize Virtual Device Using Qemu.">Customize Virtual Device Using Qemu.</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-03-10T12:00:00+08:00">
                Published: Mon 10 March 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="https://yzsh-hszy.github.io/author/yzsh-hszy.html">YZSH-HSZY</a>
                </address>
        <p>In <a href="https://yzsh-hszy.github.io/category/qemu.html">Qemu</a>.</p>
        
</footer><!-- /.post-info -->                        <h1>笔记介绍</h1>
<p>该博客用于记录学习在qemu中添加自定义开发板的过程</p>
<p><strong>注意</strong> qemu 官方在 <code>hw/misc/edu.c</code> 中提供了一个教学用的设备样例, 可参考此文件实现模拟设 …</p>
                        <a class="readmore" href="https://yzsh-hszy.github.io/2025-03-10-customize-virtual-device-using-qemu.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="https://yzsh-hszy.github.io/2025-02-10-build-mini-linux-distro-and-use-qemu-running.html" rel="bookmark"
                               title="Permalink to Build Mini Linux Distro And Use Qemu Running.">Build Mini Linux Distro And Use Qemu Running.</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-02-10T12:00:00+08:00">
                Published: Mon 10 February 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="https://yzsh-hszy.github.io/author/yzsh-hszy.html">YZSH-HSZY</a>
                </address>
        <p>In <a href="https://yzsh-hszy.github.io/category/qemu.html">Qemu</a>.</p>
        
</footer><!-- /.post-info -->                        <h1>介绍</h1>
<p>这是使用qemu的使用教程, 以构建最小linux发行版为例.
<a href="https://github.com/nir9/welcome/tree/master">参nir9博客</a></p>
<h2>术语参考</h2>
<ul>
<li><code>initrd</code>: 初始化RAM磁盘, 是在实际根文件系统之前装载的初始根文件系统. initrd绑定到内核时会被内核引导过程加载,然后挂载 …</li></ul>
                        <a class="readmore" href="https://yzsh-hszy.github.io/2025-02-10-build-mini-linux-distro-and-use-qemu-running.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="https://yzsh-hszy.github.io/2024-12-30-multiprocess-blog.html" rel="bookmark"
                               title="Permalink to multiprocess blog.">multiprocess blog.</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2024-12-30T19:00:00+08:00">
                Published: Mon 30 December 2024
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="https://yzsh-hszy.github.io/author/yzsh-hszy.html">YZSH-HSZY</a>
                </address>
        <p>In <a href="https://yzsh-hszy.github.io/category/test.html">Test</a>.</p>
        
</footer><!-- /.post-info -->                        <h1>笔记介绍</h1>
<p>该笔记用于记录工作中多进程相关问题和学习笔记.主要为python语言.
<a href="https://docs.python.org/zh-cn/3/library/multiprocessing.html">参阅官方多进程文档获取详细说明</a></p>
<blockquote>
<p>python内部提供一个multiprocessing模块, 其支持使 …</p></blockquote>
                        <a class="readmore" href="https://yzsh-hszy.github.io/2024-12-30-multiprocess-blog.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="https://yzsh-hszy.github.io/2024-07-18-cpython-learen-notes.html" rel="bookmark"
                               title="Permalink to Cpython Learen Notes.">Cpython Learen Notes.</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2024-07-18T12:00:00+08:00">
                Published: Thu 18 July 2024
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="https://yzsh-hszy.github.io/author/yzsh-hszy.html">YZSH-HSZY</a>
                </address>
        <p>In <a href="https://yzsh-hszy.github.io/category/cpython.html">Cpython</a>.</p>
        
</footer><!-- /.post-info -->                        <h1>cpython</h1>
<p>一个python的c语言解释器，同样的python解释器实现还有jython、pypy等</p>
<p><a href="https://github.com/python/cpython">github官网</a></p>
<h2>准备</h2>
<p>在学习python的过程中，我对python的一些工作细节感到困惑，因此有了本文。在这里我将学习cpython源码的一些细节记录在下面:</p>
<p><strong>环境</strong> cpython 3.12.3,ubuntu 20.04 in wsl2,gun/gcc系列编译器
<strong>注意</strong> cpython在编译安装时，需 …</p>
                        <a class="readmore" href="https://yzsh-hszy.github.io/2024-07-18-cpython-learen-notes.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="https://yzsh-hszy.github.io/2024-07-18-cpython-package-publish-notes.html" rel="bookmark"
                               title="Permalink to Cpython Package Publish Notes.">Cpython Package Publish Notes.</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2024-07-18T12:00:00+08:00">
                Published: Thu 18 July 2024
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="https://yzsh-hszy.github.io/author/yzsh-hszy.html">YZSH-HSZY</a>
                </address>
        <p>In <a href="https://yzsh-hszy.github.io/category/cpython.html">Cpython</a>.</p>
        
</footer><!-- /.post-info -->                        <h2>如何在 pypi(即python package index，python包索引)上发布自己新建的工具包？</h2>
<h3>setup.cfg vs setup.py vs pyproject.toml区别</h3>
<p>这三个文件是Python项目的配置文件,他们分别用于不同的目的:</p>
<ol>
<li>setup.cfg: 这是 …</li></ol>
                        <a class="readmore" href="https://yzsh-hszy.github.io/2024-07-18-cpython-package-publish-notes.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="https://yzsh-hszy.github.io/2024-07-18-python-super-class-example-notes.html" rel="bookmark"
                               title="Permalink to Python Super Class Example Notes.">Python Super Class Example Notes.</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2024-07-18T12:00:00+08:00">
                Published: Thu 18 July 2024
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="https://yzsh-hszy.github.io/author/yzsh-hszy.html">YZSH-HSZY</a>
                </address>
        <p>In <a href="https://yzsh-hszy.github.io/category/cpython.html">Cpython</a>.</p>
        
</footer><!-- /.post-info -->                        <h2>super笔记</h2>
<p>在oop编程中，我们经常需要使用super来调用父类的方法，各个编程语言均有对应的super实现。在python中提供超类super的类定义，有以下几种调用方式。</p>
<ol>
<li>在类定义代码段中，使用无参数的 <code>super …</code></li></ol>
                        <a class="readmore" href="https://yzsh-hszy.github.io/2024-07-18-python-super-class-example-notes.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>
                    </ol><!-- /#posts-list -->
  <nav>
    <ul>
      <li>Page 1 / 2</li>
        <li><a href="https://yzsh-hszy.github.io/index2.html">&rang;</a></li>
        <li><a href="https://yzsh-hszy.github.io/index2.html">&Rang;</a></li>
    </ul>
  </nav>
                    </section><!-- /#content -->
                <section id="extras" class="body">
                                <div class="blogroll">
                                        <h2>links</h2>
                                        <ul>
                                                        <li><a href="https://getpelican.com/">Pelican</a></li>
                                                        <li><a href="https://www.python.org/">Python.org</a></li>
                                                        <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                                                        <li><a href="#">You can modify those links in your config file</a></li>
                                        </ul>
                                </div><!-- /.blogroll -->
                                <div class="social">
                                        <h2>social</h2>
                                        <ul>
                                                        <li><a href="https://yzsh-hszy.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                                                        <li><a href="#">You can add links in your config file</a></li>
                                                        <li><a href="#">Another social link</a></li>
                                        </ul>
                                </div><!-- /.social -->
                </section><!-- /#extras -->

                <footer id="contentinfo" class="body">
                        <address id="about" class="vcard body">
                                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                        </address><!-- /#about -->

                        <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
                </footer><!-- /#contentinfo -->

        </body>
</html>